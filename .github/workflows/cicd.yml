name: Deploy

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # Если у тебя появится сборка (npm build и т.п.) — добавь шаги тут
      # и поменяй local_path на папку сборки (например, dist/*)

      - name: Upload via SFTP
        uses: wlixcc/SFTP-Deploy-Action@v1.2.6
        with:
          server: ${{ secrets.BEGET_HOST }}
          username: ${{ secrets.BEGET_USER }}
          password: ${{ secrets.BEGET_PASSWORD }}
          port: 22

          # что отправляем
          local_path: './*'

          # куда отправляем (папка сайта на Beget)
          remote_path: ${{ secrets.BEGET_PATH }}

          # обычно на шаред-хостинге порт принимает SFTP
          sftp_only: true

          # чтобы не заливать лишнее
          rsyncArgs: >
            --exclude=.git
            --exclude=.github
            --exclude=README.md
